<ng-container>
    <div class="content has-text-centered has-text-light" *ngIf="!matchedQuestion">
        <span class="icon is-large">
            <fa-icon [icon]="faCircleNotch" [spin]="true" size="4x"></fa-icon>
        </span>
    </div>
    <div class="box" *ngIf="matchedQuestion">
        <div class="questionheader" (click)="toggleQuestion()">
            <h2 class="is-size-4 has-text-weight-semibold"
                [innerHTML]="matchedQuestion.prompt | highlight"></h2>
            <div class="exclude-filter">
                <a class="exclude-filter-button has-text-weight-bold has-text-grey"
                    (click)="onExcludeFilter($event, 'id', id)">-</a>
            </div>
        </div>
        <div class="expanded-question" [class.expanded]="questionExpanded"
            *ngIf="questionExpanded else questionCollapsed">
            <div class="question-content">
                <ng-container *ngFor="let dialect of matchedDialectNames">
                    <p-panel [toggleable]="true" toggler="header">
                        <ng-template pTemplate="header">
                            <div class="panelheader">
                                <a class="has-text-weight-semibold is-size-6 is-italic my-2 has-text-dark filterclick"
                                    (click)="onFilterSelected($event, 'dialect', dialect)">
                                    <div class="inline-block"
                                        [innerHTML]="matchedDialects[dialect][0].dialect | highlight"></div>
                                    {{ ' (' + matchedDialects[dialect].length + ')' }}
                                </a>
                                <div class="exclude-filter">
                                    <a class="exclude-filter-button has-text-weight-bold has-text-grey"
                                        (click)="onExcludeFilter($event, 'dialect', dialect)">-</a>
                                </div>
                            </div>
                        </ng-template>
                        <ng-container *ngFor="let answer of matchedDialects[dialect]">
                            <div class="level">
                                <p class="level-left" [innerHTML]="answer.answer | highlight"></p>
                                <div class="level-right">
                                    <a class="exclude-filter has-text-grey has-text-weight-semibold"
                                        (click)="onExcludeFilter($event, 'participantId', answer.participantId.text)">-</a>
                                    <a class="filterclick has-text-grey"
                                        (click)="onFilterSelected($event, 'participantId', answer.participantId.text)">{{
                                        answer.participantId.text }}</a>
                                </div>
                            </div>
                        </ng-container>
                    </p-panel>
                </ng-container>
            </div>
        </div>
        <ng-template #questionCollapsed>
            <div class="collapsed">
                <p>{{ matchedAnswerCount }} of {{ matchedQuestion.answers.length }} answers matched</p>
                <p>{{ matchedDialectsCount }} of {{ dialectsCount }} dialects matched</p>
            </div>
        </ng-template>

    </div>
</ng-container>
